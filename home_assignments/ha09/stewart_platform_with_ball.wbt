#VRML_SIM R2023b utf8

EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/objects/backgrounds/protos/TexturedBackground.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/objects/backgrounds/protos/TexturedBackgroundLight.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/objects/floors/protos/CircleArena.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/appearances/protos/BrushedAluminium.proto"
EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/R2023b/projects/objects/balls/protos/Ball.proto"

WorldInfo {
  info [
    "Example of Stewart platform demonstrating the combination of misc Joints and Motors nodes"
  ]
  title "Stewart Platform"
  basicTimeStep 4
  lineScale 1
}
Viewpoint {
  orientation 0.251867399181693 -0.18371243362072256 -0.950164488371672 4.634245552141358
  position 0.5339113994193845 -7.865690149234053 5.455303471715173
  near 0.5
}
TexturedBackground {
}
TexturedBackgroundLight {
}
CircleArena {
  radius 7
  floorTileSize 1 1
  wallThickness 0.5
  wallHeight 1
}
DEF STEWART_PLATFORM Robot {
  translation -0.00012855910711523407 1.1675851724158362e-05 0.02912618803952052
  rotation -0.0195650544774498 -0.0067961243957422104 -0.999785487660474 0.0005179179868347268
  children [
    DEF CYLINDER_BODY Shape {
      appearance PBRAppearance {
        baseColor 0.12 0.56 1
        roughness 1
        metalness 0
      }
      geometry Cylinder {
        height 0.1
        radius 2.3
        subdivision 48
      }
    }
    DEF LOWER_HINGE2_0 Hinge2Joint {
      jointParameters HingeJointParameters {
        position -0.02670477459739826
        anchor -1.20951 1.57453 0.120577
      }
      jointParameters2 JointParameters {
        position 0.00988246456811175
        axis 0 -1 0
      }
      endPoint DEF LOWER_PISTON_0 Solid {
        translation -1.139076310471206 1.1523594537527089 0.9122890583833935
        rotation -0.019011202125852975 0.24543585191512593 -0.9692264012027461 2.9709572489669624
        children [
          DEF UPPER_PISTON_SLIDER_0 SliderJoint {
            jointParameters JointParameters {
              position -0.03934086847918217
              axis 0 0 -1
            }
            device [
              LinearMotor {
                name "piston0"
                minPosition -0.4
                maxPosition 0.4
                maxForce 1000
              }
            ]
            endPoint DEF UPPER_PISTON_0 Solid {
              translation 0 0 1.7393408684791822
              rotation 0 -1 0 1.5708
              children [
                DEF TWO_CYLS_GROUP Group {
                  children [
                    DEF SHORT_CYL_TRANS Pose {
                      rotation 0 -1 0 1.5708
                      children [
                        Shape {
                          appearance DEF PISTON_APPEARANCE BrushedAluminium {
                            textureTransform TextureTransform {
                              rotation 1.57
                              scale 2 2
                            }
                          }
                          geometry Cylinder {
                            height 0.2
                            radius 0.1
                            subdivision 24
                          }
                        }
                      ]
                    }
                    DEF THIN_CYL_TRANS Pose {
                      translation -0.7 0 0
                      rotation 0 -1 0 1.5708
                      children [
                        Shape {
                          appearance USE PISTON_APPEARANCE
                          geometry Cylinder {
                            height 1.4
                            radius 0.07
                            subdivision 24
                          }
                        }
                      ]
                    }
                  ]
                }
                DEF UPPER_BALL_TRANS Pose {
                  translation 0.2 0 0
                  children [
                    Shape {
                      appearance USE PISTON_APPEARANCE
                      geometry Sphere {
                        radius 0.1
                        subdivision 3
                      }
                    }
                  ]
                }
                DEF UPPER_BALL_JOINT_0 BallJoint {
                  jointParameters BallJointParameters {
                    position 0.16822504296520407
                    anchor 0.2 0 0
                  }
                  endPoint DEF UPPER_PLATFORM Solid {
                    translation 0.4436715803875375 0.29769432783044536 0.9210183706945456
                    rotation 0.7062763867108369 -0.06102146486647552 0.7053013869263507 2.765566027180834
                    children [
                      DEF UPPER_PLATFORM_SHAPE Shape {
                        appearance PBRAppearance {
                          baseColor 0.12 0.56 1
                          roughness 1
                          metalness 0
                        }
                        geometry Cylinder {
                          height 0.1
                          radius 1.3
                          subdivision 24
                        }
                      }
                    ]
                    name "upper_platform"
                    boundingObject USE UPPER_PLATFORM_SHAPE
                    physics Physics {
                      density 10
                    }
                  }
                }
              ]
              boundingObject USE TWO_CYLS_GROUP
              physics Physics {
                density -1
                mass 0.278345
                centerOfMass [
                  0 0 0
                ]
                inertiaMatrix [
                  0.000842 0.141433 0.141433
                  0 0 0
                ]
              }
            }
          }
          DEF LONG_CYL_SHAPE Shape {
            appearance USE PISTON_APPEARANCE
            geometry Cylinder {
              height 1.6
              radius 0.1
              subdivision 24
            }
          }
          DEF LOWER_BALL Pose {
            translation 0 0 -0.9
            children [
              Shape {
                appearance USE PISTON_APPEARANCE
                geometry Sphere {
                  radius 0.1
                  subdivision 3
                }
              }
            ]
          }
        ]
        name "lower piston 0"
        boundingObject USE LONG_CYL_SHAPE
        physics Physics {
          density 10
        }
      }
    }
    DEF LOWER_HINGE2_1 Hinge2Joint {
      jointParameters HingeJointParameters {
        position -0.01276381196580633
        anchor -1.20951 -1.57453 0.120577
      }
      jointParameters2 JointParameters {
        position 0.010438812220357028
        axis 0 -1 0
      }
      endPoint DEF LOWER_PISTON_1 Solid {
        translation -1.1395103599441663 -1.1214480908874283 0.8950533987081499
        rotation -0.9492577315269596 0.06119533858804125 -0.30848807054955346 0.5626205111186848
        children [
          DEF UPPER_PISTON_SLIDER_1 SliderJoint {
            jointParameters JointParameters {
              position -0.03936503978602818
              axis 0 0 -1
            }
            device [
              LinearMotor {
                name "piston1"
                minPosition -0.4
                maxPosition 0.4
                maxForce 1000
              }
            ]
            endPoint DEF UPPER_PISTON_1 Solid {
              translation 0 0 1.7393650397860279
              rotation 0 -1 0 1.5708
              children [
                USE TWO_CYLS_GROUP
                USE UPPER_BALL_TRANS
                DEF UPPER_BALL_JOINT_1 BallJoint {
                  jointParameters BallJointParameters {
                    position 0.15426335634878469
                    anchor 0.2 0 0
                  }
                  endPoint SolidReference {
                    solidName "upper_platform"
                  }
                }
              ]
              boundingObject USE TWO_CYLS_GROUP
              physics Physics {
                density -1
                mass 0.278345
                centerOfMass [
                  0 0 0
                ]
                inertiaMatrix [
                  0.000842 0.141433 0.141433
                  0 0 0
                ]
              }
            }
          }
          USE LONG_CYL_SHAPE
          USE LOWER_BALL
        ]
        name "lower piston 1"
        boundingObject USE LONG_CYL_SHAPE
        physics Physics {
          density 10
        }
      }
    }
    DEF LOWER_HINGE2_2 Hinge2Joint {
      jointParameters HingeJointParameters {
        position -0.043337887646459516
        anchor -0.75883 -1.83473 0.120577
      }
      jointParameters2 JointParameters {
        position -0.007777015253304425
        axis 0 -1 0
      }
      endPoint DEF LOWER_PISTON_2 Solid {
        translation -0.40805890116196186 -1.5121007823091315 0.8840347119533847
        rotation -0.5166997847569869 0.2105488240668908 -0.8298738007167915 1.0325188095539368
        children [
          DEF UPPER_PISTON_SLIDER_2 SliderJoint {
            jointParameters JointParameters {
              position 0.11580243993461209
              axis 0 0 -1
            }
            device [
              LinearMotor {
                name "piston2"
                minPosition -0.4
                maxPosition 0.4
                maxForce 1000
              }
            ]
            endPoint DEF UPPER_PISTON_2 Solid {
              translation 0 0 1.5841975600653877
              rotation 0 -1 0 1.5708
              children [
                USE TWO_CYLS_GROUP
                USE UPPER_BALL_TRANS
                DEF UPPER_BALL_JOINT_2 BallJoint {
                  jointParameters BallJointParameters {
                    position 0.18282257102198413
                    anchor 0.2 0 0
                  }
                  endPoint SolidReference {
                    solidName "upper_platform"
                  }
                }
              ]
              boundingObject USE TWO_CYLS_GROUP
              physics Physics {
                density -1
                mass 0.278345
                centerOfMass [
                  0 0 0
                ]
                inertiaMatrix [
                  0.000842 0.141433 0.141433
                  0 0 0
                ]
              }
            }
          }
          USE LONG_CYL_SHAPE
          USE LOWER_BALL
        ]
        name "lower piston 2"
        boundingObject USE LONG_CYL_SHAPE
        physics Physics {
          density 10
        }
      }
    }
    DEF LOWER_HINGE2_3 Hinge2Joint {
      jointParameters HingeJointParameters {
        position -0.01830912453974895
        anchor 1.96834 -0.260201 0.120577
      }
      jointParameters2 JointParameters {
        position 0.03496089548696818
        axis 0 -1 0
      }
      endPoint DEF LOWER_PISTON_3 Solid {
        translation 1.5184946215988477 -0.40009377191957696 0.8874328669696733
        rotation -0.20010877093245436 -0.25650375130505976 0.9456015574026593 1.979893599558673
        children [
          DEF UPPER_PISTON_SLIDER_3 SliderJoint {
            jointParameters JointParameters {
              position 0.11580689282960421
              axis 0 0 -1
            }
            device [
              LinearMotor {
                name "piston3"
                minPosition -0.4
                maxPosition 0.4
                maxForce 1000
              }
            ]
            endPoint DEF UPPER_PISTON_3 Solid {
              translation 0 0 1.5841931071703956
              rotation 0 -1 0 1.5708
              children [
                USE TWO_CYLS_GROUP
                USE UPPER_BALL_TRANS
                DEF UPPER_BALL_JOINT_3 BallJoint {
                  jointParameters BallJointParameters {
                    position 0.16645238450535627
                    anchor 0.2 0 0
                  }
                  endPoint SolidReference {
                    solidName "upper_platform"
                  }
                }
              ]
              boundingObject USE TWO_CYLS_GROUP
              physics Physics {
                density -1
                mass 0.278345
                centerOfMass [
                  0 0 0
                ]
                inertiaMatrix [
                  0.000842 0.141433 0.141433
                  0 0 0
                ]
              }
            }
          }
          USE LONG_CYL_SHAPE
          USE LOWER_BALL
        ]
        name "lower piston 3"
        boundingObject USE LONG_CYL_SHAPE
        physics Physics {
          density 10
        }
      }
    }
    DEF LOWER_HINGE2_4 Hinge2Joint {
      jointParameters HingeJointParameters {
        position -0.013708353986945669
        anchor 1.96834 0.260201 0.120577
      }
      jointParameters2 JointParameters {
        position -0.006024018246494117
        axis 0 -1 0
      }
      endPoint DEF LOWER_PISTON_4 Solid {
        translation 1.5501829024931366 0.42481453511920364 0.9003499148092928
        rotation -0.3520840820776856 -0.2321464188076528 0.9067220298317977 1.3192418570149547
        children [
          DEF UPPER_PISTON_SLIDER_4 SliderJoint {
            jointParameters JointParameters {
              position -0.07644898905384778
              axis 0 0 -1
            }
            device [
              LinearMotor {
                name "piston4"
                minPosition -0.4
                maxPosition 0.4
                maxForce 1000
              }
            ]
            endPoint DEF UPPER_PISTON_4 Solid {
              translation 0 0 1.776448989053848
              rotation 0 -1 0 1.5708
              children [
                USE TWO_CYLS_GROUP
                USE UPPER_BALL_TRANS
                DEF UPPER_BALL_JOINT_4 BallJoint {
                  jointParameters BallJointParameters {
                    position 0.15395862857481996
                    anchor 0.2 0 0
                  }
                  endPoint SolidReference {
                    solidName "upper_platform"
                  }
                }
              ]
              boundingObject USE TWO_CYLS_GROUP
              physics Physics {
                density -1
                mass 0.278345
                centerOfMass [
                  0 0 0
                ]
                inertiaMatrix [
                  0.000842 0.141433 0.141433
                  0 0 0
                ]
              }
            }
          }
          USE LONG_CYL_SHAPE
          USE LOWER_BALL
        ]
        name "lower piston 4"
        boundingObject USE LONG_CYL_SHAPE
        physics Physics {
          density 10
        }
      }
    }
    DEF LOWER_HINGE2_5 Hinge2Joint {
      jointParameters HingeJointParameters {
        position -0.027226562261174925
        anchor -0.75883 1.83473 0.120577
      }
      jointParameters2 JointParameters {
        position 0.019611152460780996
        axis 0 -1 0
      }
      endPoint DEF LOWER_PISTON_5 Solid {
        translation -0.4294606905833236 1.5669855355442208 0.9141930366302549
        rotation 0.11657198486886772 -0.23956616929847327 0.9638563289574789 3.9844971396957702
        children [
          DEF UPPER_PISTON_SLIDER_5 SliderJoint {
            jointParameters JointParameters {
              position -0.07642955461578152
              axis 0 0 -1
            }
            device [
              LinearMotor {
                name "piston5"
                minPosition -0.4
                maxPosition 0.4
                maxForce 1000
              }
            ]
            endPoint DEF UPPER_PISTON_5 Solid {
              translation 0 0 1.7764295546157813
              rotation 0 -1 0 1.5708
              children [
                USE TWO_CYLS_GROUP
                USE UPPER_BALL_TRANS
                DEF UPPER_BALL_JOINT_5 BallJoint {
                  jointParameters BallJointParameters {
                    position 0.16984660699173526
                    anchor 0.2 0 0
                  }
                  endPoint SolidReference {
                    solidName "upper_platform"
                  }
                }
              ]
              boundingObject USE TWO_CYLS_GROUP
              physics Physics {
                density -1
                mass 0.278345
                centerOfMass [
                  0 0 0
                ]
                inertiaMatrix [
                  0.000842 0.141433 0.141433
                  0 0 0
                ]
              }
            }
          }
          USE LONG_CYL_SHAPE
          USE LOWER_BALL
        ]
        name "lower piston 5"
        boundingObject USE LONG_CYL_SHAPE
        physics Physics {
          density 10
        }
      }
    }
  ]
  boundingObject USE CYLINDER_BODY
  physics Physics {
    density 250
  }
  controller "stewart_platform_py"
  supervisor TRUE
}
DEF BALL Ball {
  translation 0.0376645 -0.627632 3.05665
  rotation -0.479948889453625 0.8628628012572653 -0.1584829634967025 -1.7830153071795865
  color 1 0.34519 0.939376
  radius 0.2
  mass 0.1
}
